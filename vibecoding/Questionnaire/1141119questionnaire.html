<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ ¡é•·å¸«å¾’åˆ¶å¯¦æ–½æˆæ•ˆå•å·</title>
    <style>
        /* --- å…¨åŸŸè®Šæ•¸èˆ‡é‡ç½® --- */
        :root {
            --primary-color: #004a99;     /* å°ˆæ¥­æ·±è— */
            --secondary-color: #0056b3;   /* æ¬¡è¦è— */
            --accent-color: #eef4ff;      /* æ·ºè—èƒŒæ™¯ (é¸ä¸­/Hoverç”¨) */
            --bg-color: #f4f7f6;          /* ç¶²é èƒŒæ™¯ */
            --card-bg: #ffffff;           /* å¡ç‰‡èƒŒæ™¯ */
            --text-main: #333;            /* ä¸»è¦æ–‡å­— */
            --text-sub: #555;             /* æ¬¡è¦æ–‡å­— */
            --border-color: #e0e0e0;      /* é‚Šæ¡†é¡è‰² */
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* é™°å½± */
            --radius: 8px;                /* åœ“è§’ */
        }

        * {
            box-sizing: border-box; /* ç¢ºä¿å¯¬åº¦è¨ˆç®—åŒ…å« padding */
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤æ‰‹æ©Ÿé»æ“Šæ™‚çš„è—è‰²é«˜äº® */
        }

        html, body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans TC", "Microsoft JhengHei", sans-serif;
            line-height: 1.6;
            background-color: var(--bg-color);
            color: var(--text-main);
            scroll-behavior: smooth;
            font-size: 16px; /* åŸºæº–å­—é«”å¤§å°ï¼Œé˜²æ­¢ iOS ç¸®æ”¾ */
        }

        /* --- é ‚éƒ¨æ¨™é¡Œåˆ— --- */
        header {
            width: 100%;
            background-color: var(--primary-color);
            color: white;
            padding: 1.2rem 1rem;
            text-align: center;
            font-size: 1.4rem;
            font-weight: 700;
            box-shadow: 0 2px 6px rgba(0,0,0,0.15);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        /* --- ä¸»è¦å®¹å™¨ --- */
        .container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2.5rem;
            background-color: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        /* --- èªªæ˜å€å¡Š --- */
        .description {
            background-color: #fff;
            border-left: 6px solid var(--primary-color);
            padding: 1.5rem;
            margin-bottom: 2.5rem;
            border-radius: 4px;
            background: #f8f9fa;
        }
        .description p { margin: 0.5rem 0; }

        /* --- è¡¨å–®å€å¡Š (Fieldset) --- */
        fieldset {
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 2rem;
            margin-bottom: 2.5rem;
            background-color: #fff;
            min-width: 0; /* ä¿®æ­£ Flex å­å…ƒç´ æº¢å‡ºå•é¡Œ */
            transition: border-color 0.3s;
        }

        legend {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary-color);
            padding: 0 0.8rem;
            margin-left: 0.5rem;
        }

        /* ä¸åŒå€å¡Šçš„é…è‰² */
        .fieldset-basic-info { border-top: 4px solid #0056b3; }
        .fieldset-basic-info legend { color: #0056b3; }
        
        .fieldset-open-questions { border-top: 4px solid #006437; }
        .fieldset-open-questions legend { color: #006437; }

        /* --- å•é¡Œç¾¤çµ„ --- */
        .form-group { 
            margin-bottom: 2rem; 
            padding: 15px; /* å¢åŠ å…§è·ï¼Œè®“éŒ¯èª¤ç´…æ¡†ä¸è²¼å­— */
            border-radius: 8px;
            transition: background-color 0.3s, box-shadow 0.3s;
            border: 2px solid transparent; /* é ç•™é‚Šæ¡†ä½ç½®é¿å…è·³å‹• */
        }

        .form-group label, .question-text {
            display: block;
            margin-bottom: 0.8rem;
            font-weight: 600;
            font-size: 1.15rem;
            color: #222;
            line-height: 1.5;
        }
        
        .question-note {
            font-size: 0.95rem;
            color: var(--text-sub);
            margin-top: -0.5rem;
            margin-bottom: 1rem;
            padding: 0.5rem;
            background-color: #f1f1f1;
            border-radius: 4px;
        }

        .required { color: #d32f2f; font-weight: bold; margin-left: 4px; }

        /* --- é¸é …æŒ‰éˆ•ç¾¤çµ„ (Radio Buttons) --- */
        .options-group {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
        }

        .options-group label {
            flex: 1 1 auto; /* è‡ªå‹•ä¼¸ç¸® */
            min-width: 140px; /* æœ€å°å¯¬åº¦ç¢ºä¿æ–‡å­—ä¸æŠ˜è¡Œ */
            text-align: center;
            padding: 0.8rem 1.2rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: #fff;
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 48px; /* è§¸æ§å‹å–„é«˜åº¦ */
            font-size: 1rem;
        }

        .options-group label:hover {
            background-color: var(--accent-color);
            border-color: var(--primary-color);
        }

        /* é‡è¦ä¿®æ­£ï¼šä½¿ç”¨çµ•å°å®šä½éš±è— inputï¼Œç¢ºä¿ç€è¦½å™¨é©—è­‰æ©Ÿåˆ¶èƒ½æŠ“åˆ°å®ƒ */
        .options-group input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
            pointer-events: none;
        }
        
        .options-group label:has(input[type="radio"]:checked) {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0,74,153,0.3);
        }

        /* --- è¼¸å…¥æ¡† --- */
        input[type="text"], select, textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 16px; /* é˜²æ­¢ iOS ç¸®æ”¾ */
            background-color: #fff;
            transition: border-color 0.2s;
        }
        
        input[type="text"]:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 74, 153, 0.1);
        }

        textarea { resize: vertical; min-height: 120px; }

        /* --- è¡Œæ”¿å€åœ°åœ– (Grid System) --- */
        #districtMap {
            background-color: #fcfcfc;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        .district-group { margin-bottom: 1.5rem; }
        .district-group:last-child { margin-bottom: 0; }
        
        .district-label {
            font-size: 1rem;
            font-weight: 600;
            color: #555;
            margin-bottom: 0.8rem;
            border-bottom: 2px solid #eee;
            padding-bottom: 0.3rem;
        }

        .district-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); /* è‡ªå‹•æ’ç‰ˆ */
            gap: 0.8rem;
        }

        .district-btn {
            padding: 0.6rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            background-color: #fff;
            cursor: pointer;
            text-align: center;
            font-size: 0.95rem;
            min-height: 44px; /* è§¸æ§é«˜åº¦ */
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .district-btn:hover {
            background-color: var(--accent-color);
            border-color: var(--primary-color);
        }
        
        .district-btn.selected {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            font-weight: 600;
        }

        /* --- Likert é‡è¡¨ (RWD æ ¸å¿ƒ) --- */
        .dimension {
            margin-top: 3rem;
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid #eee;
            border-left-width: 6px;
        }

        /* å‘åº¦é¡è‰²å®šç¾© */
        .dimension-1 { background: #f4f9ff; border-left-color: #004a99; }
        .dimension-1 h4 { color: #004a99; }
        
        .dimension-2 { background: #f2fffa; border-left-color: #00794a; }
        .dimension-2 h4 { color: #00794a; }
        
        .dimension-3 { background: #fffbf2; border-left-color: #b87400; }
        .dimension-3 h4 { color: #b87400; }
        
        .dimension-4 { background: #fbf5ff; border-left-color: #5a0099; }
        .dimension-4 h4 { color: #5a0099; }
        
        .dimension-5 { background: #f2fdfe; border-left-color: #007a7c; }
        .dimension-5 h4 { color: #007a7c; }

        .likert-question {
            padding: 1.5rem 15px; /* å¢åŠ å·¦å³å…§è· */
            border-bottom: 1px dashed #ccc;
            border-radius: 8px;
            transition: background-color 0.3s, box-shadow 0.3s;
            border: 2px solid transparent; /* é ç•™é‚Šæ¡† */
        }
        .likert-question:last-child { border-bottom: none; }

        /* é¸é …å®¹å™¨ - é è¨­ç‚ºæ©«å‘ (Desktop) */
        .likert-options {
            display: flex;
            justify-content: space-between;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .likert-options label {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 0.8rem 0.2rem;
            border: 1px solid #ddd;
            background-color: rgba(255,255,255,0.8);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 60px; /* ç¢ºä¿é«˜åº¦ä¸€è‡´ */
            font-size: 0.9rem;
        }

        /* EMOJI æ¨£å¼å„ªåŒ– */
        .likert-options label .emoji {
            font-size: 1.5rem;
            display: block; /* é›»è…¦ç‰ˆï¼šè¡¨æƒ…åœ¨ä¸Šæ–¹ */
            margin-bottom: 4px;
            filter: grayscale(0.2); /* æœªé¸ä¸­æ™‚ç¨å¾®ç°éš */
            transition: all 0.2s;
        }

        /* Hover æ•ˆæœ */
        .likert-options label:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            background-color: #fff;
            border-color: var(--primary-color);
        }
        
        .likert-options label:hover .emoji {
            filter: grayscale(0);
            transform: scale(1.1);
        }

        /* é¸ä¸­ç‹€æ…‹ (ä¾æ“šå„å‘åº¦é¡è‰²) */
        .likert-options label:has(input[type="radio"]:checked) {
            color: white;
            font-weight: bold;
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            border: none;
        }
        
        .likert-options label:has(input[type="radio"]:checked) .emoji {
            filter: grayscale(0);
            transform: scale(1.1);
        }

        .dimension-1 .likert-options label:has(input[type="radio"]:checked) { background: #004a99; }
        .dimension-2 .likert-options label:has(input[type="radio"]:checked) { background: #00794a; }
        .dimension-3 .likert-options label:has(input[type="radio"]:checked) { background: #b87400; }
        .dimension-4 .likert-options label:has(input[type="radio"]:checked) { background: #5a0099; }
        .dimension-5 .likert-options label:has(input[type="radio"]:checked) { background: #007a7c; }

        /* é‡è¦ä¿®æ­£ï¼šä½¿ç”¨çµ•å°å®šä½éš±è— input */
        .likert-options input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
            pointer-events: none;
        }

        /* --- é€å‡ºæŒ‰éˆ• --- */
        .submit-container { text-align: center; margin-top: 3rem; padding-bottom: 2rem; }
        
        #submitBtn {
            background-color: var(--secondary-color);
            color: white;
            padding: 1rem 4rem;
            border: none;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 86, 179, 0.3);
            transition: all 0.3s ease;
            width: auto;
            min-width: 200px;
        }
        
        #submitBtn:hover {
            background-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 74, 153, 0.4);
        }
        
        #submitBtn:active { transform: scale(0.98); }
        #submitBtn:disabled { background-color: #bbb; cursor: not-allowed; box-shadow: none; }

        #loadingSpinner { margin-top: 1rem; font-weight: bold; color: var(--primary-color); }

        #statusMessage { margin-top: 1.5rem; padding: 1rem; border-radius: 8px; font-weight: bold; }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }

        /* --- éŒ¯èª¤æç¤ºå‹•ç•« (Shake) --- */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .highlight-error {
            animation: shake 0.5s ease-in-out;
            border: 2px solid #d32f2f !important; /* å¼·åˆ¶ç´…æ¡† */
            background-color: #fff5f5 !important; /* æ·ºç´…èƒŒæ™¯ */
            box-shadow: 0 0 15px rgba(211, 47, 47, 0.4) !important;
        }

        /* --- RWD æ–·é»å„ªåŒ– (å¹³æ¿ç›´å‘èˆ‡æ‰‹æ©Ÿ) --- */
        @media (max-width: 768px) {
            .container { margin: 0; padding: 1.5rem 1rem; border-radius: 0; box-shadow: none; width: 100%; max-width: 100%; }
            header { padding: 1rem; font-size: 1.2rem; }
            fieldset { padding: 1.2rem; margin-bottom: 1.5rem; }
            legend { font-size: 1.2rem; }
            .form-group label { font-size: 1.1rem; }
            .options-group label { flex: 1 1 45%; padding: 0.7rem 0.5rem; font-size: 0.95rem; }
            .district-grid { grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); }
            .likert-options { flex-direction: column; gap: 0.6rem; }
            .likert-options label { flex-direction: row; justify-content: flex-start; padding: 1rem 1.2rem; text-align: left; border-radius: 6px; background-color: #fff; border: 1px solid #e0e0e0; }
            .likert-options label .emoji { display: inline; margin-bottom: 0; margin-right: 10px; font-size: 1.3rem; vertical-align: middle; }
            .likert-options label::before { content: ""; display: inline-block; width: 18px; height: 18px; border-radius: 50%; border: 2px solid #bbb; margin-right: 12px; transition: all 0.2s; flex-shrink: 0; }
            .likert-options label:has(input[type="radio"]:checked)::before { border-color: #fff; background-color: #fff; box-shadow: inset 0 0 0 4px var(--primary-color); }
            .likert-options label:has(input[type="radio"]:checked) { transform: none; border: 1px solid transparent; }
            #submitBtn { width: 100%; border-radius: 8px; padding: 1rem; }
        }
    </style>

    <!-- Helper script -->
    <script>
        function createLikert(name, questionText) {
            return `
            <div class="likert-question">
                <p class="question-text">${questionText} <span class="required">*</span></p>
                <div class="likert-options">
                    <label><input type="radio" name="${name}" value="7" required> <span class="emoji">ğŸ¤©</span>(7) æ¥µç‚ºåŒæ„</label>
                    <label><input type="radio" name="${name}" value="6" required> <span class="emoji">ğŸ˜Š</span>(6) å¾ˆåŒæ„</label>
                    <label><input type="radio" name="${name}" value="5" required> <span class="emoji">ğŸ™‚</span>(5) åŒæ„</label>
                    <label><input type="radio" name="${name}" value="4" required> <span class="emoji">ğŸ˜</span>(4) æ™®é€š</label>
                    <label><input type="radio" name="${name}" value="3" required> <span class="emoji">ğŸ™</span>(3) ä¸åŒæ„</label>
                    <label><input type="radio" name="${name}" value="2" required> <span class="emoji">ğŸ˜ </span>(2) å¾ˆä¸åŒæ„</label>
                    <label><input type="radio" name="${name}" value="1" required> <span class="emoji">ğŸ˜¡</span>(1) æ¥µä¸åŒæ„</label>
                </div>
            </div>`;
        }
    </script>
</head>
<body>

    <header>ä¸­å°å­¸éšæ®µæ ¡é•·å¸«å¾’åˆ¶å¯¦æ–½æˆæ•ˆå•å·V3</header>

    <div class="container">
        <div class="description">
            <p><strong>æ•¬æ„›çš„æ ¡é•·æ‚¨å¥½ï¼š</strong></p>
            <p>é€™æ˜¯ä¸€ä»½æœ‰é—œæ ¡é•·å¸«å¾’åˆ¶å¯¦æ–½æˆæ•ˆçš„å•å·ï¼Œå¸Œæœ›å€Ÿé‡æ‚¨çš„æ™ºæ…§èˆ‡ç¶“é©—ï¼Œå°±æ‚¨å¯¦éš›çš„ç¶“é©—ä¾ç¬¦åˆç¨‹åº¦ä¾†æª¢è¦–é€™äº›é¡Œç›®ã€‚</p>
            <p>æœ¬å•å·æ—¨åœ¨æ·±å…¥äº†è§£ä¸­å°å­¸éšæ®µæ ¡é•·å°æ–¼ã€Œæ ¡é•·å¸«å¾’åˆ¶ã€çš„çœ‹æ³•èˆ‡æ„Ÿå—ç¨‹åº¦ã€‚æ‚¨çš„å¯¶è²´æ„è¦‹å°‡æ˜¯æœªä¾†ç›¸é—œæ”¿ç­–ç ”æ“¬èˆ‡å¯¦å‹™æ¨å‹•çš„é‡è¦åƒè€ƒã€‚</p>
        </div>

        <form id="surveyForm">
            <!-- å£¹ã€åŸºæœ¬è³‡æ–™ -->
            <fieldset class="fieldset-basic-info">
                <legend>å£¹ã€åŸºæœ¬è³‡æ–™</legend>
                <p class="question-note">èªªæ˜ï¼šè«‹ä¾æ“šæ‚¨çš„è³‡æ–™ç‹€æ³ï¼Œå‹¾é¸æœ€ç¬¦åˆçš„ç­”æ¡ˆã€‚(<span class="required">*</span> ç‚ºå¿…å¡«)</p>

                <div class="form-group">
                    <label>æ€§åˆ¥ <span class="required">*</span></label>
                    <div class="options-group">
                        <label><input type="radio" name="gender" value="ç”·" required> ç”·</label>
                        <label><input type="radio" name="gender" value="å¥³" required> å¥³</label>
                    </div>
                </div>

                <div class="form-group">
                    <label>å¹´é½¡ <span class="required">*</span></label>
                    <div class="options-group">
                        <label><input type="radio" name="age" value="30æ­²ï¼ˆå«ï¼‰ä»¥ä¸‹" required> 30æ­²ï¼ˆå«ï¼‰ä»¥ä¸‹</label>
                        <label><input type="radio" name="age" value="31-40æ­²" required> 31-40æ­²</label>
                        <label><input type="radio" name="age" value="41-50æ­²" required> 41-50æ­²</label>
                        <label><input type="radio" name="age" value="51æ­²-60æ­²" required> 51æ­²-60æ­²</label>
                        <label><input type="radio" name="age" value="61æ­²ä»¥ä¸Š" required> 61æ­²ä»¥ä¸Š</label>
                    </div>
                </div>

                <div class="form-group">
                    <label>æœ€é«˜å­¸æ­· <span class="required">*</span></label>
                    <div class="options-group">
                        <label><input type="radio" name="education" value="å­¸å£«" required> å­¸å£«</label>
                        <label><input type="radio" name="education" value="ç¢©å£«ï¼ˆå«40å­¸åˆ†ç­ï¼‰" required> ç¢©å£«ï¼ˆå«40å­¸åˆ†ç­ï¼‰</label>
                        <label><input type="radio" name="education" value="åšå£«" required> åšå£«</label>
                    </div>
                </div>

                <div class="form-group">
                    <label>æ“”ä»»æ ¡é•·ç¸½å¹´è³‡ <span class="required">*</span></label>
                    <div class="options-group">
                        <label><input type="radio" name="seniority" value="4å¹´ï¼ˆå«ï¼‰ä»¥ä¸‹" required> 4å¹´ï¼ˆå«ï¼‰ä»¥ä¸‹</label>
                        <label><input type="radio" name="seniority" value="5-8å¹´" required> 5-8å¹´</label>
                        <label><input type="radio" name="seniority" value="9-12å¹´" required> 9-12å¹´</label>
                        <label><input type="radio" name="seniority" value="13å¹´ï¼ˆå«ï¼‰ä»¥ä¸Š" required> 13å¹´ï¼ˆå«ï¼‰ä»¥ä¸Š</label>
                    </div>
                </div>

                <div class="form-group">
                    <label>æœå‹™å­¸æ ¡éšæ®µåˆ¥ <span class="required">*</span></label>
                    <div class="options-group">
                        <label><input type="radio" name="schoolLevel" value="åœ‹å°" required> åœ‹å°</label>
                        <label><input type="radio" name="schoolLevel" value="åœ‹ä¸­" required> åœ‹ä¸­</label>
                        <label><input type="radio" name="schoolLevel" value="é«˜ä¸­è·" required> é«˜ä¸­è·</label>
                    </div>
                </div>

                <div class="form-group">
                    <label>å­¸æ ¡è¦æ¨¡ <span class="required">*</span></label>
                    <div class="options-group">
                        <label><input type="radio" name="schoolSize" value="12ç­ï¼ˆå«ï¼‰ä»¥ä¸‹" required> 12ç­ï¼ˆå«ï¼‰ä»¥ä¸‹</label>
                        <label><input type="radio" name="schoolSize" value="13-24ç­" required> 13-24ç­</label>
                        <label><input type="radio" name="schoolSize" value="25-47ç­" required> 25-47ç­</label>
                        <label><input type="radio" name="schoolSize" value="48ç­ä»¥ä¸Š" required> 48ç­ä»¥ä¸Š</label>
                    </div>
                </div>

                <div class="form-group">
                    <label>å­¸æ ¡æ‰€åœ¨åœ°å€ <span class="required">*</span></label>
                    <div class="options-group">
                        <label><input type="radio" name="schoolRegion" value="éƒ½å¸‚å‹" required> éƒ½å¸‚å‹</label>
                        <label><input type="radio" name="schoolRegion" value="é„‰é®å‹" required> é„‰é®å‹</label>
                        <label><input type="radio" name="schoolRegion" value="åé æˆ–é›¢å³¶å‹" required> åé æˆ–é›¢å³¶å‹</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="schoolDistrict">å­¸æ ¡æ‰€å±¬è¡Œæ”¿å€ <span class="required">*</span></label>
                    <input type="hidden" id="schoolDistrict" name="schoolDistrict" value="" required>
                    <div id="districtMap">
                        <div class="district-group">
                            <div class="district-label">ç›´è½„å¸‚</div>
                            <div class="district-grid">
                                <div class="district-btn" data-value="è‡ºåŒ—å¸‚">è‡ºåŒ—å¸‚</div>
                                <div class="district-btn" data-value="æ–°åŒ—å¸‚">æ–°åŒ—å¸‚</div>
                                <div class="district-btn" data-value="æ¡ƒåœ’å¸‚">æ¡ƒåœ’å¸‚</div>
                                <div class="district-btn" data-value="è‡ºä¸­å¸‚">è‡ºä¸­å¸‚</div>
                                <div class="district-btn" data-value="è‡ºå—å¸‚">è‡ºå—å¸‚</div>
                                <div class="district-btn" data-value="é«˜é›„å¸‚">é«˜é›„å¸‚</div>
                            </div>
                        </div>
                        <div class="district-group">
                            <div class="district-label">ç¸£</div>
                            <div class="district-grid">
                                <div class="district-btn" data-value="æ–°ç«¹ç¸£">æ–°ç«¹ç¸£</div>
                                <div class="district-btn" data-value="è‹—æ —ç¸£">è‹—æ —ç¸£</div>
                                <div class="district-btn" data-value="å½°åŒ–ç¸£">å½°åŒ–ç¸£</div>
                                <div class="district-btn" data-value="å—æŠ•ç¸£">å—æŠ•ç¸£</div>
                                <div class="district-btn" data-value="é›²æ—ç¸£">é›²æ—ç¸£</div>
                                <div class="district-btn" data-value="å˜‰ç¾©ç¸£">å˜‰ç¾©ç¸£</div>
                                <div class="district-btn" data-value="å±æ±ç¸£">å±æ±ç¸£</div>
                                <div class="district-btn" data-value="å®œè˜­ç¸£">å®œè˜­ç¸£</div>
                                <div class="district-btn" data-value="èŠ±è“®ç¸£">èŠ±è“®ç¸£</div>
                                <div class="district-btn" data-value="è‡ºæ±ç¸£">è‡ºæ±ç¸£</div>
                                <div class="district-btn" data-value="æ¾æ¹–ç¸£">æ¾æ¹–ç¸£</div>
                                <div class="district-btn" data-value="é‡‘é–€ç¸£">é‡‘é–€ç¸£</div>
                                <div class="district-btn" data-value="é€£æ±Ÿç¸£">é€£æ±Ÿç¸£</div>
                            </div>
                        </div>
                        <div class="district-group">
                            <div class="district-label">å¸‚ (çœè½„å¸‚)</div>
                            <div class="district-grid">
                                <div class="district-btn" data-value="åŸºéš†å¸‚">åŸºéš†å¸‚</div>
                                <div class="district-btn" data-value="æ–°ç«¹å¸‚">æ–°ç«¹å¸‚</div>
                                <div class="district-btn" data-value="å˜‰ç¾©å¸‚">å˜‰ç¾©å¸‚</div>
                            </div>
                        </div>
                    </div>
                    <div id="districtError" style="color: red; font-size: 0.9rem; display: none; margin-top: 5px;">è«‹é¸æ“‡ä¸€å€‹è¡Œæ”¿å€ã€‚</div>
                </div>

                <div class="form-group">
                    <label>æ‚¨æ˜¯å¦æ›¾åƒèˆ‡å¸«å¾’åˆ¶åº¦ <span class="required">*</span></label>
                    <div class="options-group">
                        <label><input type="radio" name="hasMentorship" value="æ˜¯" required> æ˜¯</label>
                        <label><input type="radio" name="hasMentorship" value="å¦" required> å¦</label>
                    </div>
                </div>

                <div class="form-group">
                    <label>æ‚¨æ›¾åƒèˆ‡å¸«å¾’åˆ¶åº¦é…å°æ–¹å¼ç‚ºä½• <span class="required">*</span></label>
                    <div class="options-group">
                        <label><input type="radio" name="mentorshipType" value="æ­£å¼å®˜æ–¹å¸«å¾’åˆ¶" required> æ­£å¼å®˜æ–¹å¸«å¾’åˆ¶</label>
                        <label><input type="radio" name="mentorshipType" value="éæ­£å¼å›ºå®šå¸«å¾’é—œä¿‚" required> éæ­£å¼å›ºå®šå¸«å¾’é—œä¿‚</label>
                        <label><input type="radio" name="mentorshipType" value="åŒå„•æ•™ç·´/å­¸ç¿’ç¤¾ç¾¤" required> åŒå„•æ•™ç·´/å­¸ç¿’ç¤¾ç¾¤</label>
                        <label><input type="radio" name="mentorshipType" value="å°šæœªåƒèˆ‡" required> å°šæœªåƒèˆ‡</label>
                    </div>
                </div>
            </fieldset>

            <!-- è²³ã€é‡è¡¨ -->
            <fieldset>
                <legend>è²³ã€æ ¡é•·å¸«å¾’åˆ¶å¯¦æ–½æˆæ•ˆé‡è¡¨</legend>
                <div class="description">
                    <p><strong>èªªæ˜ï¼š</strong>è«‹æ‚¨å°ã€ ä¸­å°å­¸éšæ®µ æ ¡é•·å¸«å¾’åˆ¶å¯¦æ–½æˆæ•ˆã€‘å•å·ï¼Œå…±äº”å€‹å‘åº¦çš„åŒæ„ç¨‹åº¦ï¼Œä¾å€‹äººèªåŒç¨‹åº¦åœ¨â–¡å…§æ‰“ã€Œã€ã€‚(<span class="required">*</span> ç‚ºå¿…å¡«)</p>
                </div>
                
                <div class="likert-options" style="padding: 0.5rem 1rem; background: #f9f9f9; border-radius: 4px; margin-bottom: 1.5rem; justify-content: space-around; flex-wrap: wrap;">
                    <span style="font-size: 0.9rem;"><span class="emoji">ğŸ¤©</span>(7) æ¥µç‚ºåŒæ„</span>
                    <span style="font-size: 0.9rem;"><span class="emoji">ğŸ˜Š</span>(6) å¾ˆåŒæ„</span>
                    <span style="font-size: 0.9rem;"><span class="emoji">ğŸ™‚</span>(5) åŒæ„</span>
                    <span style="font-size: 0.9rem;"><span class="emoji">ğŸ˜</span>(4) æ™®é€š</span>
                    <span style="font-size: 0.9rem;"><span class="emoji">ğŸ™</span>(3) ä¸åŒæ„</span>
                    <span style="font-size: 0.9rem;"><span class="emoji">ğŸ˜ </span>(2) å¾ˆä¸åŒæ„</span>
                    <span style="font-size: 0.9rem;"><span class="emoji">ğŸ˜¡</span>(1) æ¥µä¸åŒæ„</span>
                </div>

                <!-- å‘åº¦ä¸€ -->
                <div class="dimension dimension-1">
                    <h4>å‘åº¦ä¸€ï¼šæ ¡å‹™ç¶“ç‡Ÿèˆ‡å±æ©Ÿè™•ç†</h4>
                    <p class="question-note">å®šç¾©ï¼šæœ¬å‘åº¦èšç„¦æ–¼å¸«å‚…æ ¡é•·åœ¨å”åŠ©åˆä»»æ ¡é•·æ‡‰å°ã€Œæ ¡å‹™ç¶“ç‡Ÿã€å…¨è²Œçš„æŒ‡å°æˆæ•ˆã€‚</p>
                    
                    <script>
                       const qA = [
                         "1. å¸«å‚…æ ¡é•·èƒ½æä¾›åˆä»»æ ¡é•·å­¸æ ¡ç¸½å‹™è¡Œæ”¿äº‹å‹™çš„å°ˆæ¥­æŒ‡å°ã€‚",
                         "2. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·åšæœ‰æ•ˆçš„æ™‚é–“ç®¡ç†ï¼Œæå‡è¡Œæ”¿è™•ç†æ•ˆèƒ½ã€‚",
                         "3. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·å»ºç«‹å…¨æ–¹ä½çš„æ ¡åœ’å®‰å…¨ç®¡ç†ç³»çµ±ã€‚",
                         "4. å¸«å‚…æ ¡é•·èƒ½æå‡åˆä»»æ ¡é•·åœ¨é‡å¤§å£“åŠ›æƒ…å¢ƒä¸­çš„ç­–ç•¥æ€§æ±ºç­–èƒ½åŠ›ã€‚",
                         "5. å¸«å‚…æ ¡é•·èƒ½æå‡åˆä»»æ ¡é•·åœ¨å±æ©Ÿäº‹ä»¶ä¸­çš„æ•´åˆæ€§è™•ç†èƒ½åŠ›ã€‚",
                         "6. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·åœ¨æ ¡åœ’å®‰å…¨äº‹ä»¶ä¸­ï¼Œç†Ÿç¨”æ¨™æº–ä½œæ¥­è™•ç†æµç¨‹ã€‚",
                         "7. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·é€²è¡Œæ ¡å…§æœ‰é™è³‡æºçš„ç­–ç•¥æ€§åˆ†é…åŠé‹ç”¨ã€‚",
                         "8. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·å¾éŒ¯èª¤æ±ºç­–ä¸­é€²è¡Œäº‹å¾Œæª¢è¨æ±²å–ç¶“é©—ã€‚",
                         "9. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·é‹ç”¨æœ‰æ•ˆçš„æˆæ¬Šç­–ç•¥ï¼Œä»¥ä¿ƒé€²å­¸æ ¡è¡Œæ”¿é †æš¢é‹ä½œã€‚",
                         "10. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·åœ¨å±æ©Ÿå¾Œï¼Œå¦¥é©å®‰æ’«å¸«ç”Ÿæƒ…ç·’çš„è¼”å°ã€‚"
                       ];
                       qA.forEach((t, i) => document.write(createLikert(`A${i+1}`, t)));
                    </script>
                </div>

                <!-- å‘åº¦äºŒ -->
                <div class="dimension dimension-2">
                    <h4>å‘åº¦äºŒï¼šå¸«å¾’é—œä¿‚èˆ‡é—œæ‡·æ”¯æŒ</h4>
                    <p class="question-note">å®šç¾©ï¼šæœ¬å‘åº¦èšç„¦æ–¼å¸«å¾’äº’å‹•çš„å“è³ªèˆ‡æƒ…æ„ŸåŠŸèƒ½ã€‚</p>
                    <script>
                        const qB = [
                            "1. å¸«å‚…æ ¡é•·èˆ‡åˆä»»æ ¡é•·æœ‰è‰¯å¥½çš„ä¿¡ä»»é—œä¿‚ã€‚",
                            "2. å¸«å‚…æ ¡é•·èˆ‡åˆä»»æ ¡é•·æœ‰å®‰å…¨ä¿¡è³´çš„äº’å‹•æ°›åœï¼Œå¯ä»¥å¦èª äº¤æµã€‚",
                            "3. å¸«å‚…æ ¡é•·èˆ‡åˆä»»æ ¡é•·åœ¨äº’å‹•éç¨‹ä¸­ï¼Œèƒ½å½¼æ­¤ç›¸äº’å‚¾è½èˆ‡å°Šé‡ã€‚",
                            "4. å¸«å‚…æ ¡é•·æœ‰åŒç†å¿ƒï¼Œæä¾›åˆä»»æ ¡é•·æº«æš–ä¸”æœ‰æ•ˆçš„æƒ…æ„Ÿæ”¯æŒã€‚",
                            "5. å¸«å‚…æ ¡é•·èƒ½æœ‰æ•ˆç·©è§£åˆä»»æ ¡é•·çš„å­¤ç«‹æ„Ÿèˆ‡å·¥ä½œç„¦æ…®ã€‚",
                            "6. å¸«å‚…æ ¡é•·èƒ½æå‡åˆä»»æ ¡é•·çš„å·¥ä½œæ»¿æ„åº¦ã€‚",
                            "7. å¸«å‚…æ ¡é•·èƒ½ä¸»å‹•é—œæ‡·åˆä»»æ ¡é•·çš„èº«å¿ƒå¥åº·ï¼Œå±•ç¾å‡ºå…¬äº‹å¤–çš„æ”¯æŒã€‚",
                            "8. å¸«å‚…æ ¡é•·èƒ½å¹«åŠ©åˆä»»æ ¡é•·æ‡‰å°æœ€å…·æŒ‘æˆ°æ€§çš„å·¥ä½œå£“åŠ›ã€‚",
                            "9. å¸«å‚…æ ¡é•·æ‰€ç‡Ÿé€ çš„é—œä¿‚æ°›åœï¼Œè®“åˆä»»æ ¡é•·ç„¡å¾Œé¡§ä¹‹æ†‚å°‹æ±‚å”åŠ©èˆ‡æŒ‡å°ã€‚",
                            "10. å¸«å‚…æ ¡é•·èƒ½çµ¦äºˆç©æ¥µè‚¯å®šèˆ‡è³¦èƒ½ï¼Œå¼·åŒ–åˆä»»æ ¡é•·è¾¦å­¸è‡ªä¿¡å¿ƒã€‚"
                        ];
                        qB.forEach((t, i) => document.write(createLikert(`B${i+1}`, t)));
                    </script>
                </div>

                <!-- å‘åº¦ä¸‰ -->
                <div class="dimension dimension-3">
                    <h4>å‘åº¦ä¸‰ï¼šæ•™å­¸é ˜å°èˆ‡æ–‡åŒ–å¡‘é€ </h4>
                    <p class="question-note">å®šç¾©ï¼šæœ¬å‘åº¦æ—¨åœ¨æª¢è¦–å¸«å‚…æ ¡é•·åœ¨å”åŠ©åˆä»»æ ¡é•·ç™¼å±•æ•™å­¸é ˜å°ã€è¨­å®šæ•™å­¸æ–¹å‘ç­‰æ ¸å¿ƒæ•™è‚²å·¥ä½œçš„æˆæ•ˆã€‚</p>
                     <script>
                        const qC = [
                            "1. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·ç™¼å±•èª²ç¨‹èˆ‡æ•™å­¸é ˜å°çš„å°ˆæ¥­èƒ½åŠ›ã€‚",
                            "2. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·é‡å®šå­¸æ ¡æ•™å­¸ç™¼å±•æ–¹å‘ã€‚",
                            "3. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·ç™¼å±•å¯¦è¸å­¸æ ¡é¡˜æ™¯èˆ‡ç‰¹è‰²ã€‚",
                            "4. å¸«å‚…æ ¡é•·èƒ½æä¾›åˆä»»æ ¡é•·å½¢å¡‘æˆ–è½‰åŒ–å­¸æ ¡çµ„ç¹”æ–‡åŒ–çš„æœ‰æ•ˆç­–ç•¥ã€‚",
                            "5. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·æ“¬å®šæœ‰æ•ˆæ¨å‹•å­¸æ ¡æ•™å­¸å“è³ªæ”¹é€²è¨ˆç•«ã€‚",
                            "6. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·é€éç³»çµ±æ€§çš„æ•™å¸«å°ˆæ¥­ç™¼å±•ï¼Œç‡Ÿé€ æ ¡åœ’çš„å­¸ç¿’å‹çµ„ç¹”æ–‡åŒ–ã€‚",
                            "7. å¸«å‚…æ ¡é•·èƒ½æä¾›æœ‰æ•ˆçš„æ¿€å‹µç­–ç•¥ï¼Œä»¥æå‡æ•™å¸«çš„å°ˆæ¥­æŠ•å…¥èˆ‡å‹•æ©Ÿã€‚",
                            "8. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·ç‡Ÿé€ ä¸€å€‹æ­£å‘ç©æ¥µçš„å­¸æ ¡æ–‡åŒ–ã€‚",
                            "9. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·èª¿æ•´å­¸æ ¡çµ„ç¹”æ¶æ§‹ï¼Œä»¥æœ‰æ•ˆæ”¯æŒæ ¸å¿ƒæ•™å­¸ä»»å‹™ã€‚",
                            "10. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·å–„ç”¨å½±éŸ¿åŠ›ï¼Œå¾ªåºæ¼¸é€²åœ°æ¨å‹•æ•™å­¸è®Šé©ã€‚"
                        ];
                        qC.forEach((t, i) => document.write(createLikert(`C${i+1}`, t)));
                    </script>
                </div>

                <!-- å‘åº¦å›› -->
                <div class="dimension dimension-4">
                    <h4>å‘åº¦å››ï¼šäººéš›æºé€šèˆ‡é—œä¿‚å»ºç«‹</h4>
                    <p class="question-note">å®šç¾©ï¼šæœ¬å‘åº¦æ—¨åœ¨è©•ä¼°å¸«å‚…æ ¡é•·åœ¨æŒ‡å°åˆä»»æ ¡é•·å¦‚ä½•èˆ‡åˆ©å®³é—œä¿‚äººå»ºç«‹è‰¯å¥½é—œä¿‚çš„æˆæ•ˆã€‚</p>
                    <script>
                        const qD = [
                            "1. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·èˆ‡æ ¡å…§å¤–é—œéµåˆ©å®³é—œä¿‚äººï¼Œå»ºç«‹æ­£å‘çš„ä¿¡ä»»é—œä¿‚ã€‚",
                            "2. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·é‹ç”¨æœ‰æ•ˆçš„æºé€šç­–ç•¥ï¼Œä»¥ä¿ƒé€²åŒä»é–“çš„å°ˆæ¥­å°è©±èˆ‡åˆä½œã€‚",
                            "3. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·å±•ç¾æœ‰æ•ˆçš„åœ˜éšŠé ˜å°åŠ›ï¼Œä»¥å‡èšå…±è­˜ä¸¦ææŒ¯å£«æ°£ã€‚",
                            "4. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·å»ºç«‹æ ¡å…§æ­£å‘çš„æºé€šæ©Ÿåˆ¶ï¼Œç‡Ÿé€ çµ„ç¹”å…§çš„äº’ä¿¡æ°›åœã€‚",
                            "5. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·æœ‰æ•ˆè™•ç†è¦ªå¸«ç”Ÿä¹‹é–“çš„äº’å‹•è­°é¡Œï¼Œä»¥å»ºç«‹ç©©å›ºçš„æ•™è‚²å¤¥ä¼´é—œä¿‚ã€‚",
                            "6. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·é€éè³¦æ¬Šå¢èƒ½ï¼Œä¾†æå‡è¡Œæ”¿åœ˜éšŠçš„æ•´é«”åˆä½œæ•ˆèƒ½ã€‚",
                            "7. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·æœ‰æ•ˆç¶“ç‡Ÿèˆ‡æ ¡å…§å¤–ç¤¾ç¾¤çš„å’Œè«§é—œä¿‚ã€‚",
                            "8. å¸«å‚…æ ¡é•·èƒ½æä¾›å»ºç«‹ç©©å›ºè¦ªå¸«åˆä½œå¤¥ä¼´é—œä¿‚çš„æœ‰æ•ˆç­–ç•¥ã€‚",
                            "9. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·ä»¥å…¬å¹³ã€å¯©æ…çš„åŸå‰‡ï¼Œè™•ç†æ•™è·å“¡çš„äººäº‹è­°é¡Œã€‚",
                            "10. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·èˆ‡ä¸»ç®¡æ©Ÿé—œåŠæ˜”æ—¥åŒä»å»ºç«‹æœ‰æ•ˆçš„å·¥ä½œé—œä¿‚ã€‚"
                        ];
                        qD.forEach((t, i) => document.write(createLikert(`D${i+1}`, t)));
                    </script>
                </div>

                <!-- å‘åº¦äº” -->
                <div class="dimension dimension-5">
                    <h4>å‘åº¦äº”ï¼šå°ˆæ¥­åæ€èˆ‡è‡ªä¸»æˆé•·</h4>
                    <p class="question-note">å®šç¾©ï¼šæœ¬å‘åº¦æ—¨åœ¨æ¢è¨å¸«å¾’åˆ¶æ˜¯å¦èƒ½å¼•å°åˆä»»æ ¡é•·é€²è¡Œæ·±å±¤å•é¡Œè¨ºæ–·ã€åæ€æ€§æ€è€ƒã€‚</p>
                    <script>
                        const qE = [
                            "1. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·é‹ç”¨åæ€æ€§æå•ï¼Œæ·±å…¥è¨ºæ–·å•é¡Œæ ¹æºã€‚",
                            "2. å¸«å‚…æ ¡é•·èƒ½æå‡åˆä»»æ ¡é•·åœ¨è¤‡é›œæƒ…å¢ƒçš„åæ€èˆ‡æ´å¯Ÿèƒ½åŠ›ã€‚",
                            "3. å¸«å‚…æ ¡é•·èƒ½æå‡åˆä»»æ ¡é•·çš„å°ˆæ¥­è‡ªä¸»æ€§ã€ç¨ç«‹å­¸ç¿’åŠè§£æ±ºå•é¡Œçš„èƒ½åŠ›ã€‚",
                            "4. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·åœ¨é ˜å°å°ˆæ¥­æŠ€èƒ½ä¸Šçš„å¯¦è³ªæˆé•·ã€‚",
                            "5. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·å¾å¤šå…ƒè¦–è§’åˆ†ææ–¹æ¡ˆåˆ©å¼Šã€‚",
                            "6. å¸«å‚…æ ¡é•·èƒ½å”åŠ©åˆä»»æ ¡é•·å¾å¯¦å‹™ç¶“é©—ä¸­å½°é¡¯å€‹äººçš„é ˜å°å“²å­¸ã€‚",
                            "7. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·é‹ç”¨ç³»çµ±æ€§æ€è€ƒä¾†åˆ†æèˆ‡è§£æ±ºå•é¡Œã€‚",
                            "8. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·ï¼Œå°‡å€‹äººå°ˆæ¥­ç™¼å±•èˆ‡å­¸æ ¡æ°¸çºŒç™¼å±•çš„ç›®æ¨™ç›¸çµåˆã€‚",
                            "9. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·åœ¨è¡Œæ”¿å¯¦å‹™ä¸­ï¼Œæœ‰æ•ˆåœ°é€£çµèˆ‡æ‡‰ç”¨æ•™è‚²ç†è«–ã€‚",
                            "10. å¸«å‚…æ ¡é•·èƒ½å¼•å°åˆä»»æ ¡é•·å»ºç«‹æ¸…æ™°çš„å°ˆæ¥­è‡ªæˆ‘èªåŒã€‚"
                        ];
                        qE.forEach((t, i) => document.write(createLikert(`E${i+1}`, t)));
                    </script>
                </div>
            </fieldset>

            <!-- é–‹æ”¾å¼å•é¡Œ -->
            <fieldset class="fieldset-open-questions">
                <legend>åƒã€é–‹æ”¾å¼å•é¡Œ</legend>
                <div class="form-group">
                    <label for="openQ1">1. æ‚¨å°ç›®å‰åœ‹æ°‘ä¸­å°å­¸æ ¡é•·å¸«å¾’åˆ¶åº¦æœ‰ä½•å…·é«”å»ºè­°æˆ–æ”¹é€²æ–¹å‘ï¼Ÿ</label>
                    <textarea id="openQ1" name="openQ1" rows="5" placeholder="è«‹åœ¨æ­¤è¼¸å…¥æ‚¨çš„å¯¶è²´æ„è¦‹..."></textarea>
                </div>
                <div class="form-group">
                    <label for="openQ2">2. æ‚¨èªç‚ºå¸«å¾’åˆ¶å°æ ¡é•·å°ˆæ¥­ç™¼å±•çš„å¹«åŠ©ç‚ºä½•ï¼Ÿè«‹ç°¡è¿°æ‚¨çš„çœ‹æ³•æˆ–ç¶“é©—ã€‚</label>
                    <textarea id="openQ2" name="openQ2" rows="5" placeholder="è«‹åœ¨æ­¤è¼¸å…¥æ‚¨çš„å¯¶è²´æ„è¦‹..."></textarea>
                </div>
                <div class="form-group">
                    <label for="openQ3">3. æ‚¨èªç‚ºå½±éŸ¿æ‚¨åƒèˆ‡å¸«å¾’åˆ¶çš„å…¶ä»–å› ç´ æœ‰å“ªäº›ï¼Ÿ</label>
                    <textarea id="openQ3" name="openQ3" rows="5" placeholder="è«‹åœ¨æ­¤è¼¸å…¥æ‚¨çš„å¯¶è²´æ„è¦‹..."></textarea>
                </div>
            </fieldset>

            <!-- é€å‡ºæŒ‰éˆ•èˆ‡ç‹€æ…‹è¨Šæ¯ -->
            <div class="submit-container">
                <button type="submit" id="submitBtn">é€å‡ºå•å·</button>
                <div id="loadingSpinner" style="display: none;">
                    <p>è³‡æ–™é€å‡ºä¸­ï¼Œè«‹ç¨å€™...</p>
                </div>
                <div id="statusMessage" style="display: none;"></div>
            </div>

            <p style="text-align: center; margin-top: 2rem; font-size: 0.9rem; color: #777;">
                æ„Ÿè¬æ‚¨çš„åƒèˆ‡ï¼æ‚¨çš„å¯¶è²´æ„è¦‹å°‡æœ‰åŠ©æ–¼æå‡æ ¡é•·å°ˆæ¥­ç™¼å±•çš„å“è³ªã€‚
            </p>
        </form>
    </div>

    <script>
        // ==========================================
        // ï¼ï¼ï¼è«‹å°‡æ­¤è™•æ›¿æ›ç‚ºæ‚¨çš„ GAS Web App URLï¼ï¼ï¼
        // ==========================================
        const GAS_API_URL = 'https://script.google.com/macros/s/AKfycbwmKozl2rx41I0d9VNKPt4r2atpAJ7Zuf-Ow64MAk3-lgJtxa5fkO4-jS1ZkdMdPMnh/exec';
        // ==========================================

        // --- District Map Logic ---
        document.addEventListener('DOMContentLoaded', function() {
            const districtMap = document.getElementById('districtMap');
            const hiddenInput = document.getElementById('schoolDistrict');
            const districtError = document.getElementById('districtError');

            if (districtMap) {
                districtMap.addEventListener('click', function(e) {
                    if (e.target.classList.contains('district-btn')) {
                        const selectedValue = e.target.dataset.value;
                        hiddenInput.value = selectedValue;
                        const allBtns = districtMap.querySelectorAll('.district-btn');
                        allBtns.forEach(btn => btn.classList.remove('selected'));
                        e.target.classList.add('selected');
                        districtError.style.display = 'none';
                        
                        // ç§»é™¤éŒ¯èª¤æ¨£å¼
                         document.getElementById('districtMap').classList.remove('highlight-error');
                    }
                });
            }
            
            // ç§»é™¤ Radio Button ä¸Šçš„éŒ¯èª¤æ¨£å¼
             const allRadios = document.querySelectorAll('input[type="radio"]');
             allRadios.forEach(radio => {
                 radio.addEventListener('change', function() {
                      const container = this.closest('.form-group, .likert-question');
                      if(container) {
                          container.classList.remove('highlight-error');
                      }
                 });
             });
        });

        // --- Form Submission ---
        document.getElementById('surveyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const form = this;
            const submitBtn = document.getElementById('submitBtn');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const statusMessage = document.getElementById('statusMessage');
            const hiddenInput = document.getElementById('schoolDistrict');
            const districtError = document.getElementById('districtError');
            
            // 1. é‡ç½®æ‰€æœ‰éŒ¯èª¤æç¤ºèˆ‡æ¨£å¼
            statusMessage.style.display = 'none';
            statusMessage.className = '';
            districtError.style.display = 'none';
            document.querySelectorAll('.highlight-error').forEach(el => el.classList.remove('highlight-error'));

            // 2. æª¢æŸ¥è¡Œæ”¿å€ (éš±è—æ¬„ä½)
            if (!hiddenInput.value) {
                districtError.style.display = 'block';
                const mapContainer = document.getElementById('districtMap');
                
                // æ‰‹å‹•æ²å‹• + é¿é–‹ Header
                const headerOffset = 100;
                const elementPosition = mapContainer.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                window.scrollTo({ top: offsetPosition, behavior: "smooth" });
                
                mapContainer.classList.add('highlight-error'); 
                
                statusMessage.textContent = 'è«‹é¸æ“‡ã€Œå­¸æ ¡æ‰€å±¬è¡Œæ”¿å€ã€ï¼';
                statusMessage.className = 'error';
                statusMessage.style.display = 'block';
                
                setTimeout(() => {
                    alert('è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½ï¼(è«‹æª¢æŸ¥è¡Œæ”¿å€æ˜¯å¦å·²é»é¸)');
                }, 600);
                return;
            }

            // 3. æª¢æŸ¥å…¶ä»–å¿…å¡«æ¬„ä½ (æ‰‹å‹•æŠ“å– + æ²å‹•)
            if (!form.checkValidity()) {
                // é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
                statusMessage.textContent = 'æ‚¨æœ‰éƒ¨åˆ†é¡Œç›®å°šæœªå¡«ç­”ï¼Œå·²è‡ªå‹•æ²å‹•è‡³è©²é¡Œï¼Œè«‹æª¢æŸ¥ç´…è‰²æ¨™ç¤ºè™•ã€‚';
                statusMessage.className = 'error';
                statusMessage.style.display = 'block';

                // æ‰¾åˆ°ç¬¬ä¸€å€‹ç„¡æ•ˆçš„æ¬„ä½
                const invalidElements = form.querySelectorAll(':invalid');
                if (invalidElements.length > 0) {
                    const firstInvalid = invalidElements[0];
                    
                    // å˜—è©¦æ‰¾åˆ°è©²æ¬„ä½çš„ã€Œå®¹å™¨ã€
                    let container = firstInvalid.closest('.likert-question, .form-group');
                    if (!container) container = firstInvalid.parentElement; // é˜²å‘† fallback
                    
                    // 1. åŠ ä¸ŠéŒ¯èª¤æ¨£å¼
                    container.classList.add('highlight-error');
                    
                    // 2. è¨ˆç®—æ²å‹•ä½ç½® (é¿é–‹ sticky header)
                    const headerOffset = 100; // é ç•™ header é«˜åº¦ + ç·©è¡
                    const elementPosition = container.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                
                    window.scrollTo({
                        top: offsetPosition,
                        behavior: "smooth"
                    });
                }
                
                // å»¶é² Alert
                setTimeout(() => {
                    alert('æ‚¨æœ‰é¡Œç›®å°šæœªå¡«ç­”ï¼Œè«‹æª¢æŸ¥ç´…è‰²æ¨™ç¤ºçš„æ¬„ä½ï¼');
                }, 600);
                return;
            }
            
            // 4. æª¢æŸ¥å¾Œç«¯ URL
            if (GAS_API_URL.includes('è«‹åœ¨æ­¤å¡«å…¥')) {
                 statusMessage.textContent = 'éŒ¯èª¤ï¼šå°šæœªè¨­å®šå¾Œç«¯ API ç¶²å€ï¼Œè«‹è¯çµ¡ç®¡ç†å“¡ã€‚';
                 statusMessage.className = 'error';
                 statusMessage.style.display = 'block';
                 alert('ç³»çµ±éŒ¯èª¤ï¼šå°šæœªè¨­å®šå¾Œç«¯ç¶²å€');
                 return;
            }

            // 5. é€å‡ºè³‡æ–™
            submitBtn.disabled = true;
            submitBtn.textContent = 'è™•ç†ä¸­...';
            loadingSpinner.style.display = 'block';

            const formData = new FormData(form);
            const dataObject = {};
            formData.forEach((value, key) => { dataObject[key] = value; });

            fetch(GAS_API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'text/plain;charset=utf-8',
                },
                body: JSON.stringify(dataObject),
            })
            .then(response => {
                 if (!response.ok) {
                     throw new Error(`HTTP error! status: ${response.status}`);
                 }
                 return response.text();
            })
            .then(text => {
                try {
                    return JSON.parse(text);
                } catch (e) {
                    console.error("JSON Parse Error. Raw text:", text);
                    throw new Error('ä¼ºæœå™¨å›å‚³æ ¼å¼éŒ¯èª¤');
                }
            })
            .then(handleSuccess)
            .catch(handleError);
        });

        function handleSuccess(response) {
            const loadingSpinner = document.getElementById('loadingSpinner');
            loadingSpinner.style.display = 'none';
            
            if (response.success) {
                document.getElementById('surveyForm').style.display = 'none';
                window.scrollTo(0, 0);
                const container = document.querySelector('.container');
                container.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <h2 style="color: #155724;">âœ” æ„Ÿè¬å¡«å¯«ï¼</h2>
                        <p>æ‚¨çš„å›è¦†å·²æˆåŠŸé€å‡ºã€‚</p>
                    </div>`;
            } else {
                handleError({ message: response.error || 'ä¼ºæœå™¨è™•ç†å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚' });
            }
        }

        function handleError(error) {
            const submitBtn = document.getElementById('submitBtn');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const statusMessage = document.getElementById('statusMessage');

            loadingSpinner.style.display = 'none';
            submitBtn.disabled = false;
            submitBtn.textContent = 'é€å‡ºå•å·';

            let errorMsg = (error && error.message) ? error.message : 'é€å‡ºå¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šã€‚';
            statusMessage.textContent = errorMsg;
            statusMessage.className = 'error';
            statusMessage.style.display = 'block';
            
            // æ²å‹•åˆ°æœ€åº•éƒ¨éŒ¯èª¤è¨Šæ¯
            statusMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
            alert('é€å‡ºå¤±æ•—ï¼š' + errorMsg);
            console.error('Detailed Error:', error);
        }
    </script>
</body>
</html>

