<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>通勤方式統計分析</title>
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* 使用 Inter 字體 */
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 p-4 md:p-8">
    <div class="max-w-6xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden">
        <header class="bg-blue-600 p-6">
            <h1 class="text-3xl font-bold text-white text-center">學生通勤方式統計分析</h1>
        </header>
        
        <main class="p-6 md:p-8">
            <!-- 數據分析總結 -->
            <section class="mb-8">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4 border-b-2 border-blue-200 pb-2">
                    數據分析總結
                </h2>
                <ul class="list-disc list-inside space-y-2 text-gray-700 text-base md:text-lg">
                    <li>
                        <strong>上學最主要方式：</strong>「家長騎機車接送」為大宗，共有 <strong>1,381</strong> 人，佔總上學人數 (2,538人) 的 <strong>54.4%</strong>。
                    </li>
                    <li>
                        <strong>放學最主要方式：</strong>「安親班接送」為最多，共有 <strong>1,096</strong> 人，佔總放學人數 (2,602人) 的 <strong>42.1%</strong>。
                    </li>
                    <li>
                        <strong>顯著差異：</strong>「安親班接送」在上學時為 0 人，放學時增至 1,096 人。同時，「家長騎機車接送」從上學的 1,381 人減少至放學的 610 人。顯示，許多學生早上由家長騎機車送至學校，下午則直接由安親班接走。
                    </li>
                    <li>
                        <strong>年級趨勢：</strong>「自行走路」的人數隨著年級越高而顯著增加，上學人數從一年級的 27 人成長至六年級的 154 人，顯示高年級學生的獨立性明顯提升。
                    </li>
                </ul>
            </section>
            
            <!-- 圖表一：總覽 -->
            <section class="mb-8">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4 text-center">
                    總覽：各方式上學與放學總人數
                </h2>
                <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                    <canvas id="methodChart"></canvas>
                </div>
            </section>
            
            <!-- 圖表二：趨勢 -->
            <section>
                <h2 class="text-2xl font-semibold text-gray-800 mb-4 text-center">
                    趨勢：「自行走路」人數隨年級變化
                </h2>
                <div class="bg-gray-50 p-4 rounded-lg shadow-inner">
                    <canvas id="walkTrendChart"></canvas>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- 圖表一：總覽 (長條圖) ---
            
            // 原始數據處理
            const labels = ['安親班接送', '自行走路', '其它方式', '家長陪同走路', '家長開車接送', '家長騎機車接送', '搭乘大眾運輸'];
            const toSchoolData = [0, 455, 17, 310, 325, 1381, 50]; // [0+0+0+0+0+0], [27+30+43+90+111+154], [0+8+2+4+0+3], [72+57+52+58+38+33], [44+53+53+57+45+73], [193+205+267+242+240+234], [11+2+6+4+7+20]
            const afterSchoolData = [1096, 481, 26, 216, 117, 610, 56]; // [156+175+216+178+195+176], [17+20+68+99+122+155], [0+6+1+1+15+3], [48+38+30+42+30+28], [20+19+15+17+13+33], [106+103+95+108+81+117], [8+5+5+9+10+19]

            const ctx1 = document.getElementById('methodChart').getContext('2d');
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: '上學',
                            data: toSchoolData,
                            backgroundColor: 'rgba(54, 162, 235, 0.7)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        },
                        {
                            label: '放學',
                            data: afterSchoolData,
                            backgroundColor: 'rgba(255, 99, 132, 0.7)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '人數'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    }
                }
            });

            // --- 圖表二：趨勢 (折線圖) ---
            
            // 原始數據
            const gradeLabels = ['一年級', '二年級', '三年級', '四年級', '五年級', '六年級'];
            const walkToSchool = [27, 30, 43, 90, 111, 154];
            const walkAfterSchool = [17, 20, 68, 99, 122, 155];

            const ctx2 = document.getElementById('walkTrendChart').getContext('2d');
            new Chart(ctx2, {
                type: 'line',
                data: {
                    labels: gradeLabels,
                    datasets: [
                        {
                            label: '自行走路 (上學)',
                            data: walkToSchool,
                            borderColor: 'rgba(54, 162, 235, 1)',
                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                            fill: true,
                            tension: 0.1
                        },
                        {
                            label: '自行走路 (放學)',
                            data: walkAfterSchool,
                            borderColor: 'rgba(255, 99, 132, 1)',
                            backgroundColor: 'rgba(255, 99, 132, 0.2)',
                            fill: true,
                            tension: 0.1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '人數'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
        });
    </script>
</body>

</html>
